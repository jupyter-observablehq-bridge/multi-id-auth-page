!function(e,t){for(var n in t)e[n]=t[n]}(window,function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=11)}([function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ERR_STATE_MISMATCH="state_mismatch",t.ERR_STATE_MISMATCH_DESCRIPTION="\n  This error may indicate a cross-site request forgery (CSRF)\n  attack or a misconfiguration of the authorization server.\n",t.ERR_UNSUPPORTED_TOKEN_TYPE="unsupported_token_type",t.ERR_UNSUPPORTED_TOKEN_TYPE_DESCRIPTION="\n  SGWTConnect does not support the access token type\n  received from the authorization server.\n",t.ERR_UNAUTHORIZED="unauthorized",t.ERR_UNAUTHORIZED_DESCRIPTION="\n  SGWTConnect is unable to perform an action\n  because it is currently unauthorized to do so.\n",t.ERR_RENEW_TIMEOUT="renew_timeout",t.ERR_RENEW_TIMEOUT_DESCRIPTION="\n  SGWTConnect did not receive a response\n  from the authorization server while\n  renewing the token.\n",t.ERR_INVALID_REQUEST="invalid_request",t.ERR_INVALID_REQUEST_DESCRIPTION="\n  The configuration may be malformed.\n  Double check all configuration options.\n",t.ERR_UNAUTHORIZED_CLIENT="unauthorized_client",t.ERR_UNAUTHORIZED_CLIENT_DESCRIPTION="\n  The client is not authorized to request an access token\n  using this method.\n",t.ERR_ACCESS_DENIED="access_denied",t.ERR_ACCESS_DENIED_DESCRIPTION="\n  The resource owner or authorization server denied the request.\n",t.ERR_UNSUPPORTED_RESPONSE_TYPE="unsupported_response_type",t.ERR_UNSUPPORTED_RESPONSE_TYPE_DESCRIPTION='\n  The authorization server does not support obtaining an\n  access token using this method.\n\n  Double-check the "response_type" configuration option.\n',t.ERR_INVALID_SCOPE="invalid_scope",t.ERR_INVALID_SCOPE_DESCRIPTION="\n  The requested scope is invalid, unknown, or malformed.\n",t.ERR_SERVER_ERROR="server_error",t.ERR_SERVER_ERROR_DESCRIPTION="\n  The authorization server encountered an unexpected\n  condition that prevented it from fulfilling the request.\n\n  Please try again in a few minutes.\n",t.ERR_TEMPORARILY_UNAVAILABLE="temporarily_unavailable",t.ERR_TEMPORARILY_UNAVAILABLE_DESCRIPTION="\n  The authorization server is currently unable to handle\n  the request due to a temporary overloading or maintenance\n  of the server.\n\n  Please try again in a few minutes.\n",t.ERR_INTERACTION_REQUIRED="interaction_required",t.ERR_INTERACTION_REQUIRED_DESCRIPTION="\n  The Authorization Server requires End-User interaction\n  of some form to proceed.\n",t.ERR_LOGIN_REQUIRED="login_required",t.ERR_LOGIN_REQUIRED_DESCRIPTION="\n  The Authorization Server requires End-User authentication.\n",t.ERR_ACCOUNT_SELECTION_REQUIRED="account_selection_required",t.ERR_ACCOUNT_SELECTION_REQUIRED_DESCRIPTION="\n  The End-User is REQUIRED to select a session at the Authorization Server.\n  The End-User MAY be authenticated at the Authorization Server with\n  different associated accounts, but the End-User did not select a session.\n",t.ERR_CONSENT_REQUIRED="consent_required",t.ERR_CONSENT_REQUIRED_DESCRIPTION="\n  The Authorization Server requires End-User consent.\n",t.ERR_INVALID_REQUEST_URI="invalid_request_uri",t.ERR_INVALID_REQUEST_URI_DESCRIPTION="\n  The request_uri in the Authorization Request returns an error\n  or contains invalid data.\n\n  This is probably a bug in SGWTConnect.\n",t.ERR_INVALID_REQUEST_OBJECT="invalid_request_object",t.ERR_INVALID_REQUEST_OBJECT_DESCRIPTION="\n  The request parameter contains an invalid Request Object.\n\n  This is probably a bug in SGWTConnect.\n",t.ERR_REQUEST_NOT_SUPPORTED="request_not_supported",t.ERR_REQUEST_NOT_SUPPORTED_DESCRIPTION='\n  The OpenID Provider does not support use of the "request" parameter.\n',t.ERR_REQUEST_URI_NOT_SUPPORTED="request_uri_not_supported",t.ERR_REQUEST_URI_NOT_SUPPORTED_DESCRIPTION='\n  The OpenID Provider does not support use of the "request_uri" parameter.\n',t.ERR_REGISTRATION_NOT_SUPPORTED="registration_not_supported",t.ERR_REGISTRATION_NOT_SUPPORTED_DESCRIPTION='\n  The OpenID Provider does not support use of the "registration" parameter.\n',t.ERR_FAILED_TO_FETCH_OPENID_METADATA="failed_to_obtain_openid_metadata",t.ERR_FAILED_TO_FETCH_OPENID_METADATA_DESCRIPTION="\n  Failed to obtain OpenID Provider Metadata.\n",t.ERR_FAILED_TO_PARSE_OPENID_METADATA="failed_to_parse_openid_metadata",t.ERR_FAILED_TO_PARSE_OPENID_METADATA_DESCRIPTION="\n  Failed to parse OpenID Provider Discovery Metadata.\n",t.ERR_FAILED_TO_VALIDATE_OPENID_METADATA="failed_to_validate_openid_metadata",t.ERR_FAILED_TO_VALIDATE_OPENID_METADATA_DESCRIPTION="\n  Failed to validate OpenID Provider Discovery Metadata.\n",t.ERR_OPENID_CHECK_SESSION_ERROR="check_session_error",t.ERR_OPENID_CHECK_SESSION_ERROR_DESCRIPTION="\n  Client ID and origin URL cannot be determined or are syntactically invalid.\n",t.ERR_FAILED_TO_FETCH_OPENID_CLAIMS="failed_to_obtain_openid_claims",t.ERR_FAILED_TO_FETCH_OPENID_CLAIMS_DESCRIPTION="\n  Failed to obtain OpenID UserInfo Claims.\n",t.ERR_FAILED_TO_PARSE_OPENID_CLAIMS="failed_to_parse_openid_claims",t.ERR_FAILED_TO_PARSE_OPENID_CLAIMS_DESCRIPTION="\n  Failed to parse OpenID UserInfo Claims.\n",t.ERR_FAILED_TO_VALIDATE_OPENID_CLAIMS="failed_to_validate_openid_claims",t.ERR_FAILED_TO_VALIDATE_OPENID_CLAIMS_DESCRIPTION="\n  Failed to validate OpenID UserInfo Claims.\n"},function(e,t,n){"use strict";var r,o=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var i=n(0),s=function(e){function t(n){var r=this,o="ERR_"+n.toUpperCase()+"_DESCRIPTION",s=i[o];return r=e.call(this,"SGWTConnectError "+n.toUpperCase()+" "+s)||this,Object.setPrototypeOf(r,t.prototype),r.code=n,r}return o(t,e),t}(Error);t.SGWTConnectError=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isScopeListed=function(e,t){var n=e.trim().toLowerCase().split(/\s+/),r=t.trim().toLowerCase().split(/\s+/);return n.every(function(e){return-1!==r.indexOf(e)})}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseOAuth2Fragment=function(e){return function(e){for(var t,n=/([^&=]+)=([^&]*)/g,r={};t=n.exec(e);){var o=decodeURIComponent(t[1]),i=decodeURIComponent(t[2]);r[o]=i}return r}(e.replace(/^#/,""))},t.normalizeAuthServerResponse=function(e){if(e.error)return{error:e.error,error_description:e.error_description,state:e.state};var t=1e3*parseInt(e.expires_in,10);return{access_token:e.access_token,expires_in:t,expires_at:Date.now()+t,id_token:e.id_token,scope:e.scope,state:e.state,token_type:e.token_type,session_state:e.session_state}}},function(e,t,n){"use strict";var r,o=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var i=n(13),s=n(14),a=n(2),u=n(7),c=n(1),_=n(0),p=n(5),h=n(15),l=n(3);t.SGWTConnectRenewalFrameAttribute="data-sgwt-connect-renewal-frame",t.SGWTConnectCheckSesssionFrameAttribute="data-sgwt-connect-check-session-frame";var d=function(e){function n(t,n,r){var o=e.call(this)||this;return o.config=t,o.storage=n,o.tokenExpirationTimer=null,o.periodicalRenewalTimer=null,o.periodicalRenewalBackoff=1e3,o.periodicalRenewalTimeout=3e4,o.openIDCheckSessionTimerInterval=3e3,o.version="0.9.10",o.isAuthorized()&&o.restartTokenExpirationTimer(),r&&o.hasRequestedScope("openid")&&r(function(e){e instanceof Error?o.emit(p.EVENT_OPENID_METADATA_FETCH_ERROR,e):(o.openIDMetadata=e,o.enableOpenIDSessionManagement())}),o}return o(n,e),n.prototype.requestAuthorization=function(){if(this.isAuthorized())return this.restartTokenExpirationTimer().enablePeriodicalRenewal();this.storage.removeItem("AUTH");var e=u.generateCryptoStrongRandomValue();return this.storage.setItem(e+".STATE",e),this.storage.setItem(e+".RETURN_URL",location.href),location.replace(u.generateAuthorizationUri(this.config,e)),this},n.prototype.discardAuthorization=function(){if(this.openIDMetadata){var e=this.getIdToken(),t=this.config.post_logout_redirect_uri,n=this.openIDMetadata.end_session_endpoint+"?id_token_hint="+e+(t?"&post_logout_redirect_uri="+t:"");this.once(p.EVENT_AUTH_DISCARDED,function(){window.location.replace(n)})}return this.discardAuthorizationLocally()},n.prototype.renewAuthorization=function(e){return this.requestAuthorizationWithoutPrompt({},e)},n.prototype.isAuthorized=function(){var e=this.storage.getItem("AUTH");return Boolean(e&&e.access_token)&&e.expires_at>Date.now()},n.prototype.getAuthorizationError=function(){var e=this.storage.getItem("AUTH");return e&&e.error?new c.SGWTConnectError(e.error):null},n.prototype.getAuthorizationHeader=function(){var e=this.storage.getItem("AUTH");if(!this.isAuthorized())return null;if(e.token_type&&"bearer"===e.token_type.toLowerCase())return"Bearer "+e.access_token;throw new c.SGWTConnectError(_.ERR_UNSUPPORTED_TOKEN_TYPE)},n.prototype.getGrantedScope=function(){if(!this.isAuthorized())return null;var e=this.storage.getItem("AUTH");return void 0===e.scope?this.config.scope:e.scope},n.prototype.hasGrantedScope=function(e){var t=this.getGrantedScope();return"string"==typeof t&&a.isScopeListed(e,t)},n.prototype.getIdToken=function(){if(!this.isAuthorized())return null;var e=this.storage.getItem("AUTH");return e.id_token?e.id_token:null},n.prototype.getIdTokenClaims=function(){var e=this.getIdToken();if(null===e)return null;var t=e.split(".")[1];return JSON.parse(atob(t))},n.prototype.fetchUserInfo=function(e){var t=this.getAuthorizationHeader();return t?h.fetchOpenIDUserInfo(this.config.authorization_endpoint,t,e):e(new c.SGWTConnectError(_.ERR_UNAUTHORIZED)),this},n.prototype.enablePeriodicalRenewal=function(){var e=this;return null!==this.periodicalRenewalTimer?this:(this.addListener(p.EVENT_AUTH_RENEW_SUCCESS,this.restartRenewalTimer),this.periodicalRenewalTimer=window.setTimeout(function(){e.renewResiliently()},this.getRenewalTimeout()),this)},n.prototype.disablePeriodicalRenewal=function(){return this.resetRenewalBackoff(),this.removeListener(p.EVENT_AUTH_RENEW_SUCCESS,this.restartRenewalTimer),"number"==typeof this.periodicalRenewalTimer&&(window.clearTimeout(this.periodicalRenewalTimer),this.periodicalRenewalTimer=null),this},n.prototype.discardAuthorizationLocally=function(){return this.disablePeriodicalRenewal(),this.clearTokenExpirationTimer(),this.openIDMetadata&&this.disableOpenIDSessionManagement(),this.storage.removeItem("AUTH"),this.emit(p.EVENT_AUTH_DISCARDED),this},n.prototype.requestAuthorizationWithoutPrompt=function(e,n){var r,o=this,i=e.id_token_hint,a=u.generateCryptoStrongRandomValue(),h=i?u.generateAuthorizationUri(this.config,a,{prompt:"none",id_token_hint:i}):u.generateAuthorizationUri(this.config,a,{prompt:"none"}),d=document.createElement("iframe"),E=!1,f=!1,R=function(e){if(e.source===d.contentWindow&&s.isSameOrigin(e.origin,o.config.redirect_uri)&&e.data&&"object"==typeof e.data&&"SGWTConnectFragment"===e.data.type){f=!0,window.removeEventListener("message",R),window.clearTimeout(r),E&&document.body.removeChild(d);var t=l.normalizeAuthServerResponse(l.parseOAuth2Fragment(e.data.fragment));if(t.state!==a){var i=new c.SGWTConnectError(_.ERR_STATE_MISMATCH);return o.emit(p.EVENT_AUTH_RENEW_ERROR,i),void(n&&n(i))}var u=t.error;if(u){i=new c.SGWTConnectError(u);o.emit(p.EVENT_AUTH_RENEW_ERROR,i),n&&n(i)}else o.storage.setItem("AUTH",t),o.restartTokenExpirationTimer(),o.enableOpenIDSessionManagement(),o.emit(p.EVENT_AUTH_RENEW_SUCCESS),n&&n(null)}},T=function(e){e.isTrusted&&(E=!0,d.removeEventListener("load",T),f&&document.body.removeChild(d))};return window.addEventListener("message",R),d.addEventListener("load",T),r=window.setTimeout(function(){window.clearTimeout(r),d.removeEventListener("load",T),window.removeEventListener("message",R),document.body.removeChild(d);var e=new c.SGWTConnectError(_.ERR_RENEW_TIMEOUT);o.emit(p.EVENT_AUTH_RENEW_ERROR,e),n&&n(e)},this.periodicalRenewalTimeout),d.setAttribute(t.SGWTConnectRenewalFrameAttribute,""),d.style.display="none",d.setAttribute("src",h),this.appendElementToDocumentWhenLoaded(d),this},n.prototype.appendElementToDocumentWhenLoaded=function(e){if(document.body)document.body.appendChild(e);else{var t=function(){window.removeEventListener("DOMContentLoaded",t),document.body.appendChild(e)};window.addEventListener("DOMContentLoaded",t)}},n.prototype.hasRequestedScope=function(e){return a.isScopeListed(e,this.config.scope)},n.prototype.resetRenewalBackoff=function(){return this.periodicalRenewalBackoff=1e3,this},n.prototype.incrementRenewalBackoff=function(){return this.periodicalRenewalBackoff*=2,this},n.prototype.clearTokenExpirationTimer=function(){return"number"==typeof this.tokenExpirationTimer&&(window.clearTimeout(this.tokenExpirationTimer),this.tokenExpirationTimer=null),this},n.prototype.restartTokenExpirationTimer=function(){var e=this;this.clearTokenExpirationTimer();var t=this.storage.getItem("AUTH").expires_at-Date.now();return this.tokenExpirationTimer=window.setTimeout(function(){e.emit(p.EVENT_AUTH_EXPIRED)},t),this},n.prototype.getRenewalTimeout=function(){var e=this.storage.getItem("AUTH"),t=e.expires_at-.6*e.expires_in,n=Math.max(t-Date.now(),0);return Math.min(n,2147483647)},n.prototype.renewResiliently=function(){var e=this;return this.renewAuthorization(function(t){t?(e.periodicalRenewalTimer=window.setTimeout(function(){e.renewResiliently()},e.periodicalRenewalBackoff),e.incrementRenewalBackoff()):e.resetRenewalBackoff()})},n.prototype.restartRenewalTimer=function(){var e=this;return null===this.periodicalRenewalTimer?this:(this.resetRenewalBackoff(),window.clearTimeout(this.periodicalRenewalTimer),this.periodicalRenewalTimer=window.setTimeout(function(){return e.renewResiliently()},this.getRenewalTimeout()),this)},n.prototype.enableOpenIDSessionManagement=function(){var e=this;if(this.openIDCheckSessionIframe&&this.openIDCheckSessionIframe.parentNode)return this;if(!this.openIDMetadata||!this.hasRequestedScope("openid"))return this;if(!this.isAuthorized())return this;this.openIDCheckSessionIframe=document.createElement("iframe"),this.openIDCheckSessionIframe.style.display="none",this.openIDCheckSessionIframe.setAttribute(t.SGWTConnectCheckSesssionFrameAttribute,""),window.addEventListener("message",this.handleOpenIDCheckSessionMessage.bind(this));var n=function(t){t.isTrusted&&e.openIDCheckSessionIframe&&(e.openIDCheckSessionIframe.removeEventListener("load",n),e.restartOpenIDSessionValidationTimer())};return this.openIDCheckSessionIframe.addEventListener("load",n),this.openIDCheckSessionIframe.setAttribute("src",this.openIDMetadata.check_session_iframe),this.appendElementToDocumentWhenLoaded(this.openIDCheckSessionIframe),this},n.prototype.disableOpenIDSessionManagement=function(){return window.removeEventListener("message",this.handleOpenIDCheckSessionMessage),"number"==typeof this.openIDCheckSessionTimerId&&(window.clearTimeout(this.openIDCheckSessionTimerId),this.openIDCheckSessionTimerId=void 0),this.openIDCheckSessionIframe&&(document.body.removeChild(this.openIDCheckSessionIframe),this.openIDCheckSessionIframe=void 0),this},n.prototype.restartOpenIDSessionValidationTimer=function(){window.clearTimeout(this.openIDCheckSessionTimerId),this.openIDCheckSessionTimerId=window.setTimeout(this.validateOpenIDSession.bind(this),this.openIDCheckSessionTimerInterval)},n.prototype.validateOpenIDSession=function(){var e=this;if(this.isAuthorized()){if(!this.openIDMetadata)return;if(this.openIDCheckSessionIframe&&this.openIDCheckSessionIframe.contentWindow){var t=this.storage.getItem("AUTH");this.openIDCheckSessionIframe.contentWindow.postMessage(this.config.client_id+" "+t.session_state,this.openIDMetadata.check_session_iframe),this.restartOpenIDSessionValidationTimer()}else this.enableOpenIDSessionManagement()}else this.renewAuthorization(function(t){t?e.discardAuthorizationLocally():e.restartOpenIDSessionValidationTimer()})},n.prototype.handleOpenIDCheckSessionMessage=function(e){var t=this;if(this.openIDCheckSessionIframe&&this.openIDMetadata&&e.source===this.openIDCheckSessionIframe.contentWindow&&s.isSameOrigin(e.origin,this.openIDMetadata.check_session_iframe))if("unchanged"===e.data)this.emit(p.EVENT_OPENID_SESSION_UNCHANGED);else if("changed"===e.data){this.emit(p.EVENT_OPENID_SESSION_CHANGED);var n=this.getIdToken(),r=this.getIdTokenClaims();this.requestAuthorizationWithoutPrompt({id_token_hint:n},function(e){if(!e){var n=t.getIdTokenClaims();if(n&&r&&n.sub===r.sub)return}t.discardAuthorizationLocally()})}else"error"===e.data&&this.emit(p.EVENT_OPENID_CHECK_SESSION_ERROR,new c.SGWTConnectError(_.ERR_OPENID_CHECK_SESSION_ERROR))},n}(i.EventEmitter);t.SGWTConnectCore=d},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.EVENT_AUTH_DISCARDED="authorizationDiscarded",t.EVENT_AUTH_EXPIRED="authorizationExpired",t.EVENT_AUTH_RENEW_ERROR="renewAuthorizationError",t.EVENT_AUTH_RENEW_SUCCESS="renewAuthorizationSuccess",t.EVENT_OPENID_METADATA_FETCH_ERROR="OpenIDMetadataFetchError",t.EVENT_OPENID_SESSION_CHANGED="OpenIDCheckSessionChanged",t.EVENT_OPENID_SESSION_UNCHANGED="OpenIDCheckSessionUnchanged",t.EVENT_OPENID_CHECK_SESSION_ERROR="OpenIDCheckSessionError"},function(e,t,n){"use strict";var r=this&&this.__assign||Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e};Object.defineProperty(t,"__esModule",{value:!0});var o=n(7),i=n(8);t.normalizeConfiguration=function(e,t){return r({},e,{response_type:e.response_type||"id_token token",acr_values:e.acr_values||"L2",authorization_endpoint:o.normalizeAuthorizationEndpoint(e.authorization_endpoint),redirect_uri:i.generateRedirectUri(t,e.redirect_uri)},e.post_logout_redirect_uri?{post_logout_redirect_uri:i.generateRedirectUri(t,e.post_logout_redirect_uri)}:{})}},function(e,t,n){"use strict";function r(){for(var e=(window.crypto||window.msCrypto).getRandomValues(new Uint32Array(5)),t="",n=0;n<e.length;n+=1)t+=e[n].toString(36);return t}function o(e){return e.replace(/(\/oauth2\/authorize|\/userinfo)?\/?$/,"")}Object.defineProperty(t,"__esModule",{value:!0}),t.generateCryptoStrongRandomValue=r,t.normalizeAuthorizationEndpoint=o,t.generateAuthorizationUri=function(e,t,n){return o(e.authorization_endpoint)+"/oauth2/authorize?client_id="+encodeURIComponent(e.client_id)+"&redirect_uri="+encodeURIComponent(e.redirect_uri)+"&response_type="+encodeURIComponent(e.response_type)+"&scope="+encodeURIComponent(e.scope)+"&nonce="+encodeURIComponent(r())+"&state="+encodeURIComponent(t)+"&acr_values="+encodeURIComponent(e.acr_values)+(n&&n.prompt?"&prompt="+n.prompt:"")+(n&&n.id_token_hint?"&id_token_hint="+n.id_token_hint:"")}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(2),o=n(12),i=n(3);t.generateRedirectUri=function(e,t){var n=e.protocol+"//"+e.host;return t?"/"===t.charAt(0)?""+n+t:t:n},t.isOnRedirectUri=function(e,t){var n=i.parseOAuth2Fragment(t.hash);if(!n.hasOwnProperty("state"))return!1;var s=r.isScopeListed("token",e.response_type),a=r.isScopeListed("id_token",e.response_type),u=n.hasOwnProperty("access_token"),c=n.hasOwnProperty("id_token"),_=n.hasOwnProperty("error");return!(s&&!u&&!_||a&&!c&&!_||o.normalizeUrl(t.href.replace(t.hash,""))!==o.normalizeUrl(e.redirect_uri))}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e){void 0===e&&(e=""),this.hash=e,this.baseStorageKey="SGWTConnectStorage"}return Object.defineProperty(e.prototype,"storageKey",{get:function(){return this.hash?this.baseStorageKey+"."+this.hash:this.baseStorageKey},enumerable:!0,configurable:!0}),e.prototype.getItem=function(e){var t=localStorage.getItem(this.storageKey+"."+e);return null===t?null:JSON.parse(t)},e.prototype.setItem=function(e,t){localStorage.setItem(this.storageKey+"."+e,JSON.stringify(t))},e.prototype.removeItem=function(e){localStorage.removeItem(this.storageKey+"."+e)},e.prototype.clearBy=function(e){for(var t=0;t<localStorage.length;t+=1){var n=localStorage.key(t);if(n&&-1!==n.indexOf(this.baseStorageKey)){var r=localStorage.getItem(n);e(null===r?null:JSON.parse(r),n)&&localStorage.removeItem(n)}}},e}();t.SGWTConnectStorage=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isObject=function(e){return null!==e&&"object"==typeof e}},function(e,t,n){"use strict";function r(e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}Object.defineProperty(t,"__esModule",{value:!0}),r(n(0)),r(n(1)),r(n(5)),r(n(6)),r(n(9)),r(n(4)),r(n(16))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.normalizeUrl=function(e){var t=document.createElement("a");return t.href=e,t.href}},function(e,t){function n(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function r(e){return"function"==typeof e}function o(e){return"object"==typeof e&&null!==e}function i(e){return void 0===e}e.exports=n,n.EventEmitter=n,n.prototype._events=void 0,n.prototype._maxListeners=void 0,n.defaultMaxListeners=10,n.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||isNaN(e))throw TypeError("n must be a positive number");return this._maxListeners=e,this},n.prototype.emit=function(e){var t,n,s,a,u,c;if(this._events||(this._events={}),"error"===e&&(!this._events.error||o(this._events.error)&&!this._events.error.length)){if((t=arguments[1])instanceof Error)throw t;var _=new Error('Uncaught, unspecified "error" event. ('+t+")");throw _.context=t,_}if(i(n=this._events[e]))return!1;if(r(n))switch(arguments.length){case 1:n.call(this);break;case 2:n.call(this,arguments[1]);break;case 3:n.call(this,arguments[1],arguments[2]);break;default:a=Array.prototype.slice.call(arguments,1),n.apply(this,a)}else if(o(n))for(a=Array.prototype.slice.call(arguments,1),s=(c=n.slice()).length,u=0;u<s;u++)c[u].apply(this,a);return!0},n.prototype.addListener=function(e,t){var s;if(!r(t))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",e,r(t.listener)?t.listener:t),this._events[e]?o(this._events[e])?this._events[e].push(t):this._events[e]=[this._events[e],t]:this._events[e]=t,o(this._events[e])&&!this._events[e].warned&&(s=i(this._maxListeners)?n.defaultMaxListeners:this._maxListeners)&&s>0&&this._events[e].length>s&&(this._events[e].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[e].length),"function"==typeof console.trace&&console.trace()),this},n.prototype.on=n.prototype.addListener,n.prototype.once=function(e,t){if(!r(t))throw TypeError("listener must be a function");var n=!1;function o(){this.removeListener(e,o),n||(n=!0,t.apply(this,arguments))}return o.listener=t,this.on(e,o),this},n.prototype.removeListener=function(e,t){var n,i,s,a;if(!r(t))throw TypeError("listener must be a function");if(!this._events||!this._events[e])return this;if(s=(n=this._events[e]).length,i=-1,n===t||r(n.listener)&&n.listener===t)delete this._events[e],this._events.removeListener&&this.emit("removeListener",e,t);else if(o(n)){for(a=s;a-- >0;)if(n[a]===t||n[a].listener&&n[a].listener===t){i=a;break}if(i<0)return this;1===n.length?(n.length=0,delete this._events[e]):n.splice(i,1),this._events.removeListener&&this.emit("removeListener",e,t)}return this},n.prototype.removeAllListeners=function(e){var t,n;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[e]&&delete this._events[e],this;if(0===arguments.length){for(t in this._events)"removeListener"!==t&&this.removeAllListeners(t);return this.removeAllListeners("removeListener"),this._events={},this}if(r(n=this._events[e]))this.removeListener(e,n);else if(n)for(;n.length;)this.removeListener(e,n[n.length-1]);return delete this._events[e],this},n.prototype.listeners=function(e){return this._events&&this._events[e]?r(this._events[e])?[this._events[e]]:this._events[e].slice():[]},n.prototype.listenerCount=function(e){if(this._events){var t=this._events[e];if(r(t))return 1;if(t)return t.length}return 0},n.listenerCount=function(e,t){return e.listenerCount(t)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isSameOrigin=function(e,t){var n=document.createElement("a");n.href=e;var r=n.protocol,o=n.host;n.href=t;var i=n.protocol,s=n.host;return r===i&&o===s}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(10),o=n(1),i=n(0);t.fetchOpenIDUserInfo=function(e,t,n){var s=new XMLHttpRequest;s.open("GET",e+"/oauth2/userinfo"),s.setRequestHeader("Accept","application/json"),s.setRequestHeader("Authorization",t),s.addEventListener("load",function(){if(200===s.status){var e=void 0;try{e=JSON.parse(s.responseText)}catch(e){return void n(new o.SGWTConnectError(i.ERR_FAILED_TO_PARSE_OPENID_CLAIMS))}!function(e){return r.isObject(e)&&"string"==typeof e.sub&&"string"==typeof e.name&&"string"==typeof e.locale}(e)?n(new o.SGWTConnectError(i.ERR_FAILED_TO_VALIDATE_OPENID_CLAIMS)):n(null,e)}else n(new o.SGWTConnectError(i.ERR_FAILED_TO_FETCH_OPENID_CLAIMS))}),s.send()}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(2),o=n(6),i=n(4),s=n(0),a=n(17),u=n(18),c=n(19),_=n(8),p=n(3),h=n(9);t.setupSGWTConnect=function(e){var t=o.normalizeConfiguration(e,location),n=new h.SGWTConnectStorage(a.hash(t));if(_.isOnRedirectUri(t,location)){if(window.frameElement&&window.frameElement.hasAttribute(i.SGWTConnectRenewalFrameAttribute))return window.parent.postMessage({type:"SGWTConnectFragment",fragment:location.hash},t.redirect_uri),new u.SGWTConnectNoop(t,n);var l=p.normalizeAuthServerResponse(p.parseOAuth2Fragment(window.location.hash)),d=l.state,E=n.getItem(d+".STATE");if(d===E)n.setItem("AUTH",l);else if(E){var f={error:s.ERR_STATE_MISMATCH};n.setItem("AUTH",f)}var R=n.getItem(d+".RETURN_URL")||window.location.protocol+"//"+window.location.host;return-1!==R.indexOf("#")&&location.href.split("#")[0]===R.split("#")[0]?(window.location.hash=R.split("#")[1],window.location.reload(!0)):window.location.replace(R),new u.SGWTConnectNoop(t,n)}var T=n.getItem("AUTH");T&&(n.removeItem(T.state+".STATE"),n.removeItem(T.state+".RETURN_URL")),n.clearBy(function(e,t){return-1!==t.indexOf("AUTH")&&e.expires_at<Date.now()});var I=r.isScopeListed("openid",t.scope)?new i.SGWTConnectCore(t,n,c.createOpenIDMetadataFetcher(t.authorization_endpoint)):new i.SGWTConnectCore(t,n);return I.isAuthorized()?I.enablePeriodicalRenewal():(T&&T.error&&(T.markedForDeletion?n.removeItem("AUTH"):(T.markedForDeletion=!0,n.setItem("AUTH",T))),I)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.hash=function(e){return function(e){for(var t="",n=0,r=e;n<r.length;n++){var i=r[n];t+=o(i)}return t}(function(e){var t,n=e.length,r=[1732584193,-271733879,-1732584194,271733878],o=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(t=64;t<=e.length;t+=64)i(r,h(e.substring(t-64,t)));for(e=e.substring(t-64),t=0;t<e.length;t+=1)o[t>>2]|=e.charCodeAt(t)<<(t%4<<3);if(o[t>>2]|=128<<(t%4<<3),t>55)for(i(r,o),t=0;t<16;t+=1)o[t]=0;return o[14]=8*n,i(r,o),r}(Object.keys(e).sort().reduce(function(t,n){return t+n+":"+e[n]+"|"},"|")))};var r="0123456789abcdef".split("");function o(e){for(var t="",n=0;n<4;n+=1)t+=r[e>>8*n+4&15]+r[e>>8*n&15];return t}function i(e,t){var n=e[0],r=e[1],o=e[2],i=e[3];n=u(n,r,o,i,t[0],7,-680876936),i=u(i,n,r,o,t[1],12,-389564586),o=u(o,i,n,r,t[2],17,606105819),r=u(r,o,i,n,t[3],22,-1044525330),n=u(n,r,o,i,t[4],7,-176418897),i=u(i,n,r,o,t[5],12,1200080426),o=u(o,i,n,r,t[6],17,-1473231341),r=u(r,o,i,n,t[7],22,-45705983),n=u(n,r,o,i,t[8],7,1770035416),i=u(i,n,r,o,t[9],12,-1958414417),o=u(o,i,n,r,t[10],17,-42063),r=u(r,o,i,n,t[11],22,-1990404162),n=u(n,r,o,i,t[12],7,1804603682),i=u(i,n,r,o,t[13],12,-40341101),o=u(o,i,n,r,t[14],17,-1502002290),n=c(n,r=u(r,o,i,n,t[15],22,1236535329),o,i,t[1],5,-165796510),i=c(i,n,r,o,t[6],9,-1069501632),o=c(o,i,n,r,t[11],14,643717713),r=c(r,o,i,n,t[0],20,-373897302),n=c(n,r,o,i,t[5],5,-701558691),i=c(i,n,r,o,t[10],9,38016083),o=c(o,i,n,r,t[15],14,-660478335),r=c(r,o,i,n,t[4],20,-405537848),n=c(n,r,o,i,t[9],5,568446438),i=c(i,n,r,o,t[14],9,-1019803690),o=c(o,i,n,r,t[3],14,-187363961),r=c(r,o,i,n,t[8],20,1163531501),n=c(n,r,o,i,t[13],5,-1444681467),i=c(i,n,r,o,t[2],9,-51403784),o=c(o,i,n,r,t[7],14,1735328473),n=_(n,r=c(r,o,i,n,t[12],20,-1926607734),o,i,t[5],4,-378558),i=_(i,n,r,o,t[8],11,-2022574463),o=_(o,i,n,r,t[11],16,1839030562),r=_(r,o,i,n,t[14],23,-35309556),n=_(n,r,o,i,t[1],4,-1530992060),i=_(i,n,r,o,t[4],11,1272893353),o=_(o,i,n,r,t[7],16,-155497632),r=_(r,o,i,n,t[10],23,-1094730640),n=_(n,r,o,i,t[13],4,681279174),i=_(i,n,r,o,t[0],11,-358537222),o=_(o,i,n,r,t[3],16,-722521979),r=_(r,o,i,n,t[6],23,76029189),n=_(n,r,o,i,t[9],4,-640364487),i=_(i,n,r,o,t[12],11,-421815835),o=_(o,i,n,r,t[15],16,530742520),n=p(n,r=_(r,o,i,n,t[2],23,-995338651),o,i,t[0],6,-198630844),i=p(i,n,r,o,t[7],10,1126891415),o=p(o,i,n,r,t[14],15,-1416354905),r=p(r,o,i,n,t[5],21,-57434055),n=p(n,r,o,i,t[12],6,1700485571),i=p(i,n,r,o,t[3],10,-1894986606),o=p(o,i,n,r,t[10],15,-1051523),r=p(r,o,i,n,t[1],21,-2054922799),n=p(n,r,o,i,t[8],6,1873313359),i=p(i,n,r,o,t[15],10,-30611744),o=p(o,i,n,r,t[6],15,-1560198380),r=p(r,o,i,n,t[13],21,1309151649),n=p(n,r,o,i,t[4],6,-145523070),i=p(i,n,r,o,t[11],10,-1120210379),o=p(o,i,n,r,t[2],15,718787259),r=p(r,o,i,n,t[9],21,-343485551),e[0]=a(n,e[0]),e[1]=a(r,e[1]),e[2]=a(o,e[2]),e[3]=a(i,e[3])}function s(e,t,n,r,o,i){return t=a(a(t,e),a(r,i)),a(t<<o|t>>>32-o,n)}function a(e,t){return e+t&4294967295}function u(e,t,n,r,o,i,a){return s(t&n|~t&r,e,t,o,i,a)}function c(e,t,n,r,o,i,a){return s(t&r|n&~r,e,t,o,i,a)}function _(e,t,n,r,o,i,a){return s(t^n^r,e,t,o,i,a)}function p(e,t,n,r,o,i,a){return s(n^(t|~r),e,t,o,i,a)}function h(e){for(var t=[],n=0;n<64;n+=4)t[n>>2]=e.charCodeAt(n)+(e.charCodeAt(n+1)<<8)+(e.charCodeAt(n+2)<<16)+(e.charCodeAt(n+3)<<24);return t}},function(e,t,n){"use strict";var r,o=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var i=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),t.prototype.requestAuthorization=function(){return this},t.prototype.discardAuthorization=function(){return this},t.prototype.renewAuthorization=function(){return this},t.prototype.isAuthorized=function(){return!1},t.prototype.getAuthorizationError=function(){return null},t.prototype.getAuthorizationHeader=function(){return null},t.prototype.getGrantedScope=function(){return null},t.prototype.hasGrantedScope=function(){return!1},t.prototype.getIdToken=function(){return null},t.prototype.getIdTokenClaims=function(){return null},t.prototype.enablePeriodicalRenewal=function(){return this},t.prototype.disablePeriodicalRenewal=function(){return this},t}(n(4).SGWTConnectCore);t.SGWTConnectNoop=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(10),o=n(1),i=n(0);t.createOpenIDMetadataFetcher=function(e){return function(t){var n=new XMLHttpRequest;n.open("GET",e+"/oauth2/.well-known/openid-configuration"),n.setRequestHeader("Accept","application/json"),n.addEventListener("load",function(){if(200===n.status){var e=void 0;try{e=JSON.parse(n.responseText)}catch(e){return void t(new o.SGWTConnectError(i.ERR_FAILED_TO_PARSE_OPENID_METADATA))}!function(e){return r.isObject(e)&&"string"==typeof e.check_session_iframe&&"string"==typeof e.end_session_endpoint}(e)?t(new o.SGWTConnectError(i.ERR_FAILED_TO_VALIDATE_OPENID_METADATA)):t(e)}else t(new o.SGWTConnectError(i.ERR_FAILED_TO_FETCH_OPENID_METADATA))}),n.send()}}}]));
